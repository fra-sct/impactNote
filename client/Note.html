<template name="Note">
  <div class="row">
    <div class="col-sm-9">
      {{#with note}}
        {{#if editing}}
          {{>note_edit}}
        {{else}}
          {{#if raw}}
            <pre>{{text}}</pre>
          {{else}}
            {{#markdown}}{{ text }}{{/markdown}}
          {{/if}}
        {{/if}}
      {{/with}}
    </div>
    <div class="col-sm-3">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">{{ note.title }}</h3>
        </div>
        <div class="panel-body">
          Created by {{#if user}}<a href="/user/{{user.nickname}}">{{user.nickname}}</a>{{else}}anonymous{{/if}} on {{ note.createdAt }}<br/>
          Modified on {{ note.modifiedAt }}<br/>
        </div>
        <ul class="list-group">
        {{#if editing}}
          <a href="#" class="list-group-item save"><i class="fa fa-save"></i> Save</a>
          <a href="#" class="list-group-item cancel"><i class="fa fa-times"></i> Cancel</a>
          <a href="#" class="list-group-item delete"><i class="fa fa-trash"></i> Delete</a>
        {{else}}
          {{#if raw}}
          <a href="#" class="list-group-item hide-raw"><i class="fa fa-file-o"></i> View formatted</a>
          {{else}}
          <a href="#" class="list-group-item show-raw"><i class="fa fa-file-o"></i> View raw</a>
          {{/if}}
          {{#if can_edit}}
          <a href="#" class="list-group-item edit"><i class="fa fa-edit"></i> Edit</a>
          <a href="#" class="list-group-item delete"><i class="fa fa-trash"></i> Delete</a>
          {{/if}}
        {{/if}}
        </ul>
      </div>
    </div>
  </div>
  {{> contentFor region="Footer" template="DefaultFooter"}}
</template>

<template name="note_edit">
  <form class="edit-note" role="form">
    <div class="form-group">
      <input class="form-control" type="text" name="title" placeholder="Title of the note" value="{{ title }}">
    </div>
    <div class="form-group">
      <textarea class="form-control" name="text" placeholder="Insert your note here..." rows="10">{{ text }}</textarea>
    </div>
    <div class="checkbox">
      <label><input type="checkbox" name="public" {{is_public}}>Public</label>
    </div>
  </form>
</template>
